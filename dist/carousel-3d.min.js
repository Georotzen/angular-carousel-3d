/*!
 * angular-directive-boilerplate
 * 
 * Version: 0.0.8 - 2015-10-01T04:45:55.907Z
 * License: MIT
 */
!function(e){"use strict";function t(t,i,l,r){function s(){v={slides:[],rightItems:[],leftItems:[],rightOutItem:null,leftOutItem:null,visible:3,perspective:35,animationSpeed:500,startSlide:0,dir:"ltr",degree:0,total:0,slide:0,current:null,width:480,height:360,border:10,space:"auto",topSpace:"auto",lock:!1};var e=i.children().children();if(!e.length>0)return!1;angular.extend(v,h.options);for(var t=0;t<e.length;t++){var l=e[t],r=angular.element(l);r.attr("outerwidth",v.width+v.border),r.attr("outerheight",v.height+v.border),r.attr("width",v.width),r.attr("height",v.height),r.attr("index",t),r.css({visibility:"hidden","border-width":v.border+"px"}),v.slides.push(r)}v.total=v.slides.length,v.startSlide=v.startSlide<0||v.startSlide>v.total?0:v.startSlide,v.slide=v.startSlide,v.currentSlide=angular.element(v.slides).eq(v.slide),v.visible=v.visible>v.total?v.total:v.visible,v.visible=2===v.visible?v.visible%2?v.visible:v.visible:v.visible%2?v.visible:v.visible-1,g()}function n(e){v.slide!=e?c(e):h.onSelectedClick&&h.onSelectedClick({index:v.slide})}function o(e,t,i){v.slide==v.total-1,v.slide=0>e||e>v.total-1?0:e,v.slide==v.total-1,v.currentSlide=angular.element(v.slides).eq(v.slide);for(var l=0;l<v.slides.length;l++)v.slides[l].removeClass("current");return v.lock=!0,g(!0,v.animationSpeed),i?!1:(r(function(){u()},v.animationSpeed),!0)}function a(e){return e=e?e:!1,!e&&v.lock?!1:(v.slide==v.total?o(0,!1,e):o(v.slide+1,!1,e),!1)}function d(e){return e=e?e:!1,!e&&v.lock?!1:(0==v.slide?o(v.total-1,!1,e):o(v.slide-1,!1,e),!1)}function c(e){var t=e==v.total-1&&0==v.slide?-1:e-v.slide;v.slide==v.total-1&&0==e&&(t=1);for(var i=0>t?-t:t,l=0,s=0;i>s;s++){var n=1==i?0:l;r(function(){0>t?d(i):a(i)},n),l+=v.animationSpeed/i}r(function(){u()},v.animationSpeed)}function u(){v.lock=!1,v.degree=0,h.onSlideChange&&h.onSlideChange({index:v.slide})}function m(e,t,i,l){var r=parseInt("auto"==v.space?(t+1)*(parseInt(angular.element(e).attr("width"))/1.5):(t+1)*v.space),s=l?"translateX("+r+"px) translateZ(-"+(250+110*(t+1))+"px) rotateY(-"+v.perspective+"deg)":"translateX(-"+r+"px) translateZ(-"+(250+110*(t+1))+"px) rotateY("+v.perspective+"deg)",n="0%",o="auto"==v.topSpace?"none":parseInt((t+1)*v.space),a="none",d="none",c="visible";return{"-webkit-transform":s,"-moz-transform":s,"-o-transform":s,"-ms-transform":s,transform:s,left:n,top:o,width:a,height:d,zIndex:i,overflow:c}}function g(t,i){var l=Math.floor(v.visible/2)+1;v.leftItems=[],v.rightItems=[];for(var r=1;l>r;r++){var s="ltr"==v.dir?(v.slide+r)%v.total:(v.slide-r)%v.total;v.leftItems.push(angular.element(v.slides).eq(s));var n="ltr"==v.dir?(v.slide-r)%v.total:(v.slide+r)%v.total;v.rightItems.push(angular.element(v.slides).eq(n))}v.leftOutItem=angular.element(v.slides).eq(v.slide-l),v.rightOutItem=angular.element(v.slides).eq(v.total-v.slide-l<=0?-parseInt(v.total-v.slide-l):v.slide+l);var o=v.leftOutItem,a=v.rightOutItem;"ltr"==v.dir&&(v.leftOutItem=a,v.rightOutItem=o);var d,c="auto"==v.topSpace?v.height/2-parseInt(v.currentSlide.attr("outerheight"))/2:0,u=v.width/2-parseInt(v.currentSlide.attr("outerwidth"))/2,g=(v.width/4,999),h={},f=i?i/1e3:v.animationSpeed/1e3;if(t)for(var p=0;p<v.slides.length;p++)v.slides[p].css({"-webkit-transition":"all "+f+"s ","-moz-transition":"all "+f+"s ","-o-transition":"all "+f+"s ","-ms-transition":"all "+f+"s ",transition:"all "+f+"s "});for(var I=0;I<v.slides.length;I++)v.slides[I].css({position:"absolute",opacity:0,visibility:"hidden",overflow:"hidden",top:c+"px"});v.currentSlide.addClass("current").css({zIndex:g,opacity:1,visibility:"visible"}),v.currentSlide.css({"-webkit-transform":"none","-moz-transform":"none","-o-transform":"none","-ms-transform":"none",transform:"none",left:u+"px",top:c+"px",width:v.currentSlide.attr("width")+"px",height:v.currentSlide.attr("height")+"px"});for(var b=0;b<v.rightItems.length;b++)d=v.rightItems[b],g-=b+1,h=m(d,b,g,!0),d.css(h).css({opacity:1,visibility:"visible",zIndex:g});for(var S=0;S<v.leftItems.length;S++)d=v.leftItems[S],g-=S+1,h=m(d,S,g),d.css(h).css({opacity:1,visibility:"visible",zIndex:g});if(e.log("total "+v.total),e.log("visible "+v.visible),v.total>v.visible){var w=m(v.rightOutItem,v.leftItems.length-.5,v.leftItems.length-1,!0),x=m(v.leftOutItem,v.leftItems.length-.5,v.leftItems.length-1);v.rightOutItem.css(w),v.leftOutItem.css(x)}}var h=this,v=null;e.log(h),h.init=s,h.slideClicked=n,h.goPrev=d,h.goNext=a,t.$watch("vm.ngModel",function(e){r(function(){s()})},!0)}function i(t){function i(t,i){return e.log("=== COMPILE C3D ==="),l}function l(t,i,l,r,s){e.log("=== LINK FUNC C3D ===")}var r={restrict:"AE",template:'<div class="carousel-3d-container"><div class="carousel-3d"><img ng-repeat="image in vm.ngModel track by $index" ng-src="{{image.src}}" class="slide-3d" ng-click="vm.slideClicked($index)" ng-swipe-left="vm.goPrev()" ng-swipe-right="vm.goNext()"></div></div>',replace:!0,scope:{ngModel:"=",options:"=",onSelectedClick:"&",onSlideChange:"&"},controller:"Carousel3dController as vm",bindToController:!0,compile:i,link:l};return r}angular.module("carousel3d",["swipe"]).directive("carousel3d",i).controller("Carousel3dController",t),t.$inject=["$scope","$element","$attrs","$timeout"],i.$inject=["$timeout"]}(window.console);