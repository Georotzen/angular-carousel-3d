/*!
 * angular-directive-boilerplate
 * 
 * Version: 0.0.8 - 2015-10-04T19:06:35.664Z
 * License: MIT
 */
/*!
 * angular-carousel-3d
 * 
 * Version: 0.0.4
 * License: MIT
 */
!function(){"use strict";function e(e,t){function i(t){this.imageLocations=t,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=e.defer(),this.promise=this.deferred.promise}function s(){return this.state!==this.states.PENDING}function r(){return this.state===this.states.REJECTED}function n(){return this.state===this.states.RESOLVED}function l(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var e=0;e<this.imageCount;e++)this.loadImageLocation(this.imageLocations[e].src);return this.promise}function o(e){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(e))}function a(e){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:e}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))}function d(e){var i=this,s=new Image;s.onload=function(e){t.$apply(function(){i.handleImageLoad(e.target.src),i=s=e=null})},s.onerror=function(e){t.$apply(function(){i.handleImageError(e.target.src),i=s=e=null})},s.src=e}i.preloadImages=function(e){var t=new i(e);return t.load()};var c={constructor:i,isInitiated:s,isRejected:r,isResolved:n,load:l,handleImageError:o,handleImageLoad:a,loadImageLocation:d};return angular.extend(i.prototype,c),i}function t(e,t,i,s,r,n){function l(){I=angular.element(t[0].querySelector(".carousel-3d")),p={slides:[],rightItems:[],leftItems:[],rightOutItem:null,leftOutItem:null,visible:3,perspective:35,animationSpeed:500,startSlide:0,dir:"ltr",total:0,slide:0,current:null,width:480,height:360,border:10,space:"auto",topSpace:"auto",lock:!1};var e=I.children();if(!e.length>0)return!1;angular.extend(p,v.carousel3dOptions),I.css({width:p.width+p.border+"px",height:p.height+p.border+"px"});for(var i=0;i<e.length;i++){var s=e[i],r=angular.element(s),n={outerwidth:p.width+p.border,outerheight:p.height+p.border,width:p.width,height:p.height,index:i},l={visibility:"hidden","border-width":p.border+"px"};r.attr(n),r.css(l),p.slides.push(r)}p.total=p.slides.length,p.startSlide=p.startSlide<0||p.startSlide>p.total?0:p.startSlide,p.slide=p.startSlide,p.currentSlide=p.slides[p.slide],p.visible=p.visible>p.total?p.total:p.visible,p.visible=2===p.visible?p.visible%2?p.visible:p.visible:p.visible%2?p.visible:p.visible-1,m()}function o(e){p.slide!=e?u(e):v.onSelectedClick&&v.onSelectedClick({index:p.slide})}function a(e,t,i){p.slide==p.total-1,p.slide=0>e||e>p.total-1?0:e,p.slide==p.total-1,p.currentSlide=p.slides[p.slide];for(var r=0;r<p.slides.length;r++)p.slides[r].removeClass("current");return p.lock=!0,m(!0,p.animationSpeed),s(function(){h()},p.animationSpeed),i?!1:!0}function d(e){return e=e?e:!1,!e&&p.lock?!1:(p.slide==p.total?a(0,!1,e):a(p.slide+1,!1,e),!1)}function c(e){return e=e?e:!1,!e&&p.lock?!1:(0==p.slide?a(p.total-1,!1,e):a(p.slide-1,!1,e),!1)}function u(e){var t=e==p.total-1&&0==p.slide?-1:e-p.slide;p.slide==p.total-1&&0==e&&(t=1);for(var i=0>t?-t:t,r=0,n=0;i>n;n++){var l=1==i?0:r;s(function(){0>t?c(i):d(i)},l),r+=p.animationSpeed/i}}function h(){p.lock=!1,v.onSlideChange&&v.onSlideChange({index:p.slide})}function g(e,t,i,s){var r=parseInt("auto"==p.space?(t+1)*(parseInt(angular.element(e).attr("width"))/1.5):(t+1)*p.space),n=s?"translateX("+r+"px) translateZ(-"+(250+110*(t+1))+"px) rotateY(-"+p.perspective+"deg)":"translateX(-"+r+"px) translateZ(-"+(250+110*(t+1))+"px) rotateY("+p.perspective+"deg)",l="0%",o="auto"==p.topSpace?"none":parseInt((t+1)*p.space),a="none",d="none",c="visible";return{"-webkit-transform":n,"-moz-transform":n,"-o-transform":n,"-ms-transform":n,transform:n,left:l,top:o,width:a,height:d,zIndex:i,overflow:c}}function m(e,t){var i=Math.floor(p.visible/2)+1;p.leftItems=[],p.rightItems=[];for(var s=1;i>s;s++){var r="ltr"==p.dir?(p.slide+s)%p.total:(p.slide-s)%p.total;p.leftItems.push(f(r));var n="ltr"==p.dir?(p.slide-s)%p.total:(p.slide+s)%p.total;p.rightItems.push(f(n))}p.leftOutItem=f(p.slide-i),p.rightOutItem=f(p.total-p.slide-i<=0?-parseInt(p.total-p.slide-i):p.slide+i);var l=p.leftOutItem,o=p.rightOutItem;"ltr"==p.dir&&(p.leftOutItem=o,p.rightOutItem=l);var a,d="auto"==p.topSpace?p.height/2-parseInt(p.currentSlide.attr("outerheight"))/2:0,c=p.width/2-parseInt(p.currentSlide.attr("outerwidth"))/2,u=(p.width/4,999),h={},m=t?t/1e3:p.animationSpeed/1e3;if(e)for(var I=0;I<p.slides.length;I++)p.slides[I].css({"-webkit-transition":"all "+m+"s ","-moz-transition":"all "+m+"s ","-o-transition":"all "+m+"s ","-ms-transition":"all "+m+"s ",transition:"all "+m+"s "});for(var S=0;S<p.slides.length;S++)p.slides[S].css({position:"absolute",opacity:0,visibility:"hidden",overflow:"hidden",top:d+"px"});p.currentSlide.addClass("current").css({zIndex:u,opacity:1,visibility:"visible"}),p.currentSlide.css({"-webkit-transform":"none","-moz-transform":"none","-o-transform":"none","-ms-transform":"none",transform:"none",left:c+"px",top:d+"px",width:p.currentSlide.attr("width")+"px",height:p.currentSlide.attr("height")+"px"});for(var w=0;w<p.rightItems.length;w++)a=p.rightItems[w],u-=w+1,h=g(a,w,u,!0),a.css(h).css({opacity:1,visibility:"visible",zIndex:u});for(var b=0;b<p.leftItems.length;b++)a=p.leftItems[b],u-=b+1,h=g(a,b,u),a.css(h).css({opacity:1,visibility:"visible",zIndex:u});if(p.total>p.visible){var C=g(p.rightOutItem,p.leftItems.length-.5,p.leftItems.length-1,!0),x=g(p.leftOutItem,p.leftItems.length-.5,p.leftItems.length-1);p.rightOutItem.css(C),p.leftOutItem.css(x)}v.redered=!0}function f(e){return e>=0?p.slides[e]:p.slides[p.slides.length+e]}var v=this;v.isLoading=!0,v.isSuccessful=!1,v.redered=!1,v.percentLoaded=0,v.init=l,v.slideClicked=o,v.goPrev=c,v.goNext=d;var p=null,I=null;e.$watch("[vm.ngModel, vm.carousel3dOptions]",function(){n.preloadImages(v.ngModel).then(function(e){v.isLoading=!1,v.isSuccessful=!0,s(function(){l()})},function(e){v.isLoading=!1,v.isSuccessful=!1},function(e){v.percentLoaded=e.percent})},!0)}function i(e){function t(e,t){return i}function i(e,t,i,s,r){}var s={restrict:"AE",template:'<div class="carousel-3d-container" ng-switch="vm.isLoading">   <div class="carousel-3d-loader" ng-switch-when="true">       <div class="carousel-3d-loader-circle" style="-webkit-transform:scale(0.75)"><div><div></div><div></div></div></div>       <div class="carousel-3d-loader-percentage">{{ vm.percentLoaded }}</div>   </div>   <div ng-switch-when="false" ng-switch="vm.isSuccessful">       <div class="carousel-3d" ng-switch-when="true" ng-show="vm.redered">           <img ng-repeat="image in vm.ngModel track by $index" ng-src="{{image[vm.carousel3dSourceProp]}}" class="slide-3d" ng-click="vm.slideClicked($index)" ng-swipe-left="vm.goPrev()" ng-swipe-right="vm.goNext()">       </div>       <p ng-switch-when="false">There was a problem during load</p>   </div></div>',replace:!0,scope:{ngModel:"=",carousel3dSourceProp:"@",carousel3dOptions:"=",onSelectedClick:"&",onSlideChange:"&"},controller:"Carousel3dController as vm",bindToController:!0,compile:t,link:i};return s}angular.module("angular-carousel-3d",["swipe"]).factory("PreloaderService",e).directive("carousel3d",i).controller("Carousel3dController",t),e.$inject=["$q","$rootScope"],t.$inject=["$scope","$element","$attrs","$timeout","$log","PreloaderService"],i.$inject=["$timeout"]}();